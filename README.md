[![Build Status](https://travis-ci.com/halljon/offer-example.svg?branch=master)](https://travis-ci.com/halljon/offer-example)

# offer-example
An example project based around a 'offer' demonstrating Spring Boot and current best practices.

Technologies used:
* Spring Boot
* H2 database
* PlantUML for diagrams.  Diagrams generated by gravizo.com.

# How to get started
Clone this repository and then run:

`mvn clean install`

# Modules

## Module overview
This project has a number of modules, which albeit don't contain much code, but are there to show how a complex system could be split up:

* Database - contains schema DDL and DML to populate tables with initial data.
    * Database creation and data population performed by running standard Maven clean install.
* Domain - domain object(s).
* Persistence - Persistence layer for domain objects.
* Service - Service layer interacting with persistence and controlling transactions.
* Web - REST controllers.

## Alternative module structures
The project could have been split into other module structures, namely something like the below:

### Alternative module structure 1
* Core
* Web

### Alternative module structure 2
* Single module - i.e. like Spring Boot starter.


## Use cases

![Alt text](https://g.gravizo.com/source/svg?https://raw.githubusercontent.com/halljon/offer-example/master/docs/use-case-overview.plantuml)


# Things to do 
* [Exception handling configured for controllers to give a 500 whenever anything goes wrong](https://github.com/halljon/offer-example/issues/30) 
* Change timestamp to local date time.
* [Document REST API](https://github.com/halljon/offer-example/issues/26)
* At caching of currencies, so that currency code can be checked rather than simply saving in database and having foreign key constraint.
* Tidy up application.properties, as currently in a few modules.
* Look at the //TODO: comments
* Auditing and accountability columns omitted.
* Request correlation id.

# Points to note
* Application context slicing by virtue of repository module.
* Application context slicing using Spring Boot's support.
* DateTimeService created so more control over dates could be added - i.e. to control what date/time it is beyond simply getting current system time.
* Please note: be careful with H2 local file locking - i.e. make sure it isn't locked by another process or a locking exception will be raised.

# Assumptions
Timezones have been ignored.
